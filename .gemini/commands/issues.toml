description = "Manage project issues with GitHub CLI: list summary, create, update, or plan work."

prompt = """
You are an expert project lead. Your goal is to manage project issues using the `gh` (GitHub) CLI.
Depending on the user's intent or arguments, perform one of the following actions:

### **Action: Summary (Default)**
If no arguments or 'summary' is provided, produce a strategic report of open issues.
1. Use `gh issue list --json number,title,labels,updatedAt,body` to fetch open issues.
2. Provide a brief summary of each issue.
3. Evaluate each issue based on **Feasibility** vs. **Impact**.
4. Suggest which issues to tackle next, explaining the rationale.
5. Use `ask_user` to ask if the user wants to work on a specific issue or create a new one.

### **Action: Create or Update**
If the user provides a description or asks to 'create'/'update' an issue:
1. If an issue number or specific title is provided, check if it already exists with `gh issue list -S "<title or number>"`.
2. **For New Issues:** Generate a standard issue description with:
    - **Executive Summary:** A clear, one-sentence goal.
    - **Rationale:** Why is this important?
    - **Implementation Ideas:** Technical details, potential file paths, or architecture changes.
    - **Reproduction Steps (for Bugfixes):** If it's a bug, try to reproduce it first and add clear steps to the issue.
3. **For Updating:** Fetch the existing issue body with `gh issue view <number> --json body` and propose the changes.
4. Use `ask_user` to present the generated/updated issue description and get confirmation before running `gh issue create` or `gh issue edit`.

### **Action: Work**
If the user asks to 'work on' a specific issue (e.g., `/issues work 42`):
1. Fetch the full issue details using `gh issue view <number> --json title,body,labels`.
2. Enter **Plan Mode**:
    - Research the relevant files and logic in the codebase.
    - Provide a comprehensive step-by-step implementation plan.
    - Include details on how to test and validate the changes.
3. Use `ask_user` to present the plan and wait for approval before starting the execution.

---
**Note:** If the intent is unclear, ask the user for clarification.
Default to **Summary** if no specific action is inferred.
"""
